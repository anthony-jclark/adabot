<?xml version="1.0"?>
<launch>

  <!--  -->
  <!-- These are values that can be passed via command line to this launch file -->
  <!--  model       : xacro file for adabot -->
  <!--  rvizconfig  : rviz config file (generated by manually saving an rviz setup) -->
  <!--  gui         : use a gui for the joint_state_publisher -->
  <!--  -->
  <arg name="model" default="$(find adabot_description)/urdf/adabot.main.xacro"/>
  <arg name="rvizconfig" default="$(find adabot_description)/rviz/adabot.rviz" />
  <arg name="gui" default="true" />
  <!-- These arguments are used to adjust parameters in the adabot xacro file -->
  <!--  ch_length     : length of chasis -->
  <!--  ch_width      : width of chasis -->
  <!--  wg_per_wheel  : number of wegs on each of wheels -->
  <!--  wh_radius     : radius of each wheel -->
  <arg name="ch_length"     default="0.100" />
  <arg name="ch_width"      default="0.070" />
  <arg name="wg_per_wheel"  default="5"     />
  <arg name="wh_radius"     default="0.020" />

  <!--  -->
  <!-- Parameters for the parameter server -->
  <!--  robot_description : expose the URDF model to {joint,robot}_state_publisher -->
  <!--  use_gui           : tell joint_state_publisher to show a gui -->
  <!--  -->
  <param name="robot_description" command="$(find xacro)/xacro --inorder $(arg model)
                ch_length:=$(arg ch_length)
                ch_width:=$(arg ch_width)
                wg_per_wheel:=$(arg wg_per_wheel)
                wh_radius:=$(arg wh_radius)" />
  <param name="use_gui" value="$(arg gui)" />

  <!--  -->
  <!-- Start the following ROS nodes -->
  <!--  joint_state_publisher : read the robot_description parameter and display joints -->
  <!--  robot_state_publisher : tell tf about the changes to the robots joints -->
  <!--  rviz                  : start rviz with the given config file -->
  <!--  -->
  <node name="joint_state_publisher" pkg="joint_state_publisher" type="joint_state_publisher" />
  <node name="robot_state_publisher" pkg="robot_state_publisher" type="robot_state_publisher" />
  <node name="rviz" pkg="rviz" type="rviz" args="-d $(arg rvizconfig)" required="true" />

</launch>

